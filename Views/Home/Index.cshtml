@{
    ViewBag.Title = "Home Page";
}

<div class="container banner" id="root">
    <h1>Busqueda de Inteligencias Artificiales</h1>
    <input type="text" class="form-control" v-model="txtBusqueda" v-on:keyup="getBusqueda()" v-on:keyup.enter="getBusqueda()" list="listaNombres"
           />

    <div class="row">
        <div class="col-4">
            <div class="list-group" id="list-tab" role="tablist">
                <!-- Aquí usamos v-for para generar las opciones dinámicas -->
                <a v-for="(item, index) in listaResultados"
                   :key="index"
                   :id="'list-' + item.nombre + '-list'"
                   class="list-group-item list-group-item-action"
                   :class="{'active': index === 0}"
                   data-bs-toggle="list"
                   :href="'#list-' + item.nombre"
                   role="tab"
                   :aria-controls="'list-' + item.nombre">
                    {{ item.nombre }} 
                </a>
            </div>
        </div>
        <div class="col-8">
            <div class="tab-content" id="nav-tabContent">
                <!-- Crear los tab-content dinámicamente para cada item -->
                <div v-for="(item, index) in listaResultados"
                     :key="index"
                     :id="'list-' + item.nombre"
                     class="tab-pane fade"
                     :class="{'show active': index === 0}"
                     role="tabpanel"
                     :aria-labelledby="'list-' + item.nombre + '-list'">
                    <div>
                        <p>Descripción: {{ item.descripcion }}</p>
                        <p>Tipo: {{ item.tipo}}</p>
                        <p>Empresa cradora: {{ item.creador}}</p>
                        <p>Año de su Lanzamiento: {{ item.lanzamiento}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js" integrity="sha512-DdX/YwF5e41Ok+AI81HI8f5/5UsoxCVT9GKYZRIzpLxb8Twz4ZwPPX+jQMwMhNQ9b5+zDEefc+dcvQoPWGNZ3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        var app = new Vue({
            el: "#root",
            data: {
                txtBusqueda: '',
                listaResultados: []
            },
            methods: {
                getBusqueda() {
                    if (this.txtBusqueda !== '') {
                        let cadena = this.txtBusqueda.trim();
                        let cantidad = 10;

                        axios.get("http://localhost:54233/Home/BuscarPorNombre?nombre=" + cadena + "&cantidad=" + cantidad)
                            .then(function (response) {
                                app.listaResultados = response.data;
                            }).catch(function (error) {
                                console.log(error);
                            })
                    }
                    else {
                        this.listaResultados = [];
                    }
                }
            }
        });
    </script>
}
